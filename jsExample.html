<!DOCTYPE html>
<html>
<head>
<title>JS Example</title>
<style>
body{background:#0f0f0f;color:white;text-align:center;font-family:Arial}
.box{width:650px;max-width:95%;margin:20px auto;background:#181818;padding:20px;border-radius:10px}
textarea{width:100%;height:140px;background:black;color:#00ff6a}
iframe{width:100%;height:260px;background:white;border-radius:10px}
.explain{
 background:#222;
 padding:12px;
 border-radius:10px;
 margin-top:20px;
 text-align:left;
}
button{padding:8px 15px;margin-top:10px}
</style>
</head>

<body>

<button onclick="history.back()">⬅ Back</button>

<h1 id="title"></h1>

<div class="box">

<h3>HTML</h3>
<textarea id="htmlCode"></textarea>

<h3>JavaScript</h3>
<textarea id="jsCode"></textarea>

<br>
<button onclick="run()">Run</button>

<h2>Output</h2>
<iframe id="output"></iframe>

<h2>Explanation</h2>
<div class="explain" id="explainBox"></div>

</div>

<script>

const p=new URLSearchParams(location.search);
const c=p.get("chapter");

function setExample(titleText,html,js,explain){
 title.innerHTML=titleText;
 htmlCode.value=html;
 jsCode.value=js;
 explainBox.innerHTML=explain;
}

// ALERT ------------------
if(c=="alert"){
setExample(
"Alert",
`<h1>Alert Example</h1>`,
`alert("Hello Students");`,
`alert() → shows popup<br>
console.log() → prints in console<br>
Used for warnings & messages`
);
}

// BUTTON ------------------
if(c=="button"){
setExample(
"Button Click",
`<button onclick="hello()">Click Me</button>`,
`function hello(){
 alert("Button Clicked!");
}`,
`onclick → runs when button pressed<br>
function → block of code`
);
}

// CHANGE TEXT --------------
if(c=="change"){
setExample(
"Change Text",
`<h1 id="a">Hello</h1>
<button onclick="change()">Change</button>`,
`function change(){
 document.getElementById("a").innerHTML="Text Changed";
}`,
`id="a" → unique name<br>
getElementById() → finds element<br>
innerHTML → change text`
);
}

// COUNTER -----------------
if(c=="counter"){
setExample(
"Counter",
`<h1 id="x">0</h1>
<button onclick="add()">+</button>`,
`let a=0;
function add(){
 a++;
 document.getElementById("x").innerHTML=a;
}`,
`let a=0 → start value<br>
a++ → increase value<br>
Used in games & apps`
);
}

// CHANGE COLOR --------------
if(c=="color"){
setExample(
"Change Color",
`<h1 id="t">Change Color</h1>
<button onclick="clr()">Change</button>`,
`function clr(){
 document.getElementById("t").style.color="red";
}`,
`style.color → change text color`
);
}

// ✅ REAL FIX — Proper JS Execution
function run(){
let doc = output.contentWindow.document;

doc.open();
doc.write(`
<html>
<head>
<style>
body{font-family:Arial;text-align:center;margin-top:20px}
button{padding:8px 15px}
</style>
</head>
<body>

${htmlCode.value}

<script>
${jsCode.value}
<\/script>

</body>
</html>
`);
doc.close();
}
</script>

</body>
</html>